preferredLabels = { ?subject crm:P65_shows_visual_item ?visualItem . ?visualItem rdf:type crm:E34_Inscription . ?visualItem crm:P190_has_symbolic_content ?inscriptionText . OPTIONAL { ?visualItem crm:P73_has_translation/crm:P190_has_symbolic_content ?inscriptionTextTranslation . } BIND(CONCAT("Inscription: "\\, ?inscriptionText\\, " "\\, COALESCE(?inscriptionTextTranslation\\, "")) AS ?value) },{ ?subject rdf:type crm:E34_Inscription . ?subject crm:P190_has_symbolic_content ?inscriptionText . OPTIONAL { ?subject crm:P73_has_translation/crm:P190_has_symbolic_content ?inscriptionTextTranslation . } BIND(CONCAT("Inscription: "\\, ?inscriptionText\\, " "\\, COALESCE(?inscriptionTextTranslation\\, "")) AS ?value) },<http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by>/<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.researchspace.org/ontology/displayLabel>,<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.w3.org/2004/02/skos/core#prefLabel>

preferredThumbnails = { ?subject rso:PX_has_main_representation ?representation . ?representation a rso:EX_Digital_Image . ?representation crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?fileName\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject rso:PX_has_main_representation ?representation . ?representation a rso:EX_Digital_Image . BIND(REPLACE(STR(?representation)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?imageID\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject a rso:EX_Digital_Image . ?subject crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?fileName\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject a rso:EX_Digital_Image . BIND(REPLACE(STR(?subject)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?imageID\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image . ?representation crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?fileName\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image . BIND(REPLACE(STR(?representation)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?imageID\, '/full/!640\,480/0/default.jpg') AS ?value) }, { ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?image crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. ?representation rso:boundingBox ?bb. BIND(STRAFTER(?bb\, 'xywh=') AS ?boundingBox). BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?fileName\, '/'\, ?boundingBox\, '/!640\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?representation rso:boundingBox ?bb. BIND(STRAFTER(?bb\, 'xywh=') AS ?boundingBox). BIND(REPLACE(STR(?image)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\, ?imageID\, '/'\, ?boundingBox\, '/!640\,480/0/default.jpg') AS ?value) }, <http://www.researchspace.org/ontology/PX_has_main_representation>,<http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation>, { ?object <http://www.researchspace.org/ontology/PX_has_main_representation> ?subject . BIND(?subject as ?value) }

templateIncludeQuery = PREFIX rso: <http://www.researchspace.org/ontology/> \nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> \nPREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  \nselect ?type where \n{ \n\t{ \n\t\tFILTER(STRSTARTS(STR(??)\\, "http://www.researchspace.org/resource/user/")). \n\t  \tBIND(rso:User as ?type). \n\t  \tBIND(-1 as ?index) \n\t} UNION {\n\t\t?? <http://www.researchspace.org/ontology/PX_object_type>  ?type . \n\t\tBIND(0 AS ?index) \n\t} UNION {\n\t\t?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type>  ?type .\n\t\tBIND(1 AS ?index) \n\t} UNION { \n\t\t?? a ?type . \n\t\tFILTER(STRSTARTS(STR(??)\\, "http://www.researchspace.org/term/")). \n\t\tBIND(2 AS ?index) \n\t} UNION { \n\t\t?? a ?type . \n\t\tBIND(3 AS ?index) \n\t}  UNION { \n\t\t?? a ?t .  \n\t\t?t rdfs:subClassOf* ?type . \n\t\tFILTER (?type in (crm:E28_Conceptual_Object\\, crm:E24_Physical_Man-Made_Thing\\, crm:E39_Actor\\, crm:E53_Place\\, crm:E5_Event)). \n\t\tBIND(4 AS ?index) \n\t}  UNION { \n\t\t?? a ?t . \n\t\t?t rdfs:subClassOf+ ?type . \n\t\tBIND(5 AS ?index) \n\t} \n} \nORDER BY ?index
